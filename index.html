<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parse PBMCs Visualization</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h3 id="header-text">Parse PBMCs Experiment: Sample Combined</h3>
    </header>
    <div id="input-sample-area" style="float: left">
        <select id="sample-select">
            <option value="Combined">Sample Combined</option>
            <option value="1">Sample 1</option>
            <option value="2">Sample 2</option>
            <option value="3">Sample 3</option>
            <option value="4">Sample 4</option>
            <option value="5">Sample 5</option>
            <option value="6">Sample 6</option>
            <option value="7">Sample 7</option>
            <option value="8">Sample 8</option>
            <option value="9">Sample 9</option>
            <option value="10">Sample 10</option>
            <option value="11">Sample 11</option>
            <option value="12">Sample 12</option>
        </select>
    </div>

    <div id="container">
        <div id="plot-container">
            <div id="plot-area">
                <div id="umap-plot"></div>
                <t id="loading">Loading... this might take up to a minute.</t>
            </div>
        </div>
        <div id="table-section">
            <form id="radio-select">
                <input class="table-select" type="radio" id="cluster-button" name="Table Select" value="cluster-table-container" checked>
                <label for="cluster-button">Cluster Table</label>
                <input class="table-select" type="radio" id="cell-button" name="Table Select" value="cell-table-container">
                <label for="cell-button">Cell Table</label>
                <input class="table-select" type="radio" id="gene-button" name="Table Select" value="gene-table-container">
                <label for="gene-button">Gene Table</label>
                <input class="table-select" type="radio" id="celltype-button" name="Table Select" value="marker-container">
                <label for="celltype-button">Cell type analysis</label>
            </form>

            <!-- All tables will be stacked but hidden, only one shown at a time -->
            <div id="cluster-table-container" class="table-container">
                <div id="input-cluster-div">
                    <div id="input-cluster-area">
                        <select id="cluster-select">
                            <option value="">Select Cluster</option>
                        </select>
                    </div>
                    <div id="cluster-cellnum-info" style="display:inline-block; margin-left: 15px; font-weight:bold;">
                        <t></t>
                    </div>
                </div>
                <table id="cluster-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Gene Name</th>
                            <th>Score</th>
                            <th>Log2 FC</th>
                            <th>Percent-in</th>
                            <th>Percent-out</th>
                            <th>Adjusted P-Value</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="cell-table-container" class="table-container">
                <div id="input-cell-area">
                    <input type="text" id="cell-id-input" placeholder="Enter Cell ID" />
                    <div id="cell-cluster-info" style="display:inline-block; margin-left: 15px; font-weight:bold;">
                        <!-- Cluster info will be displayed here -->
                    </div>
                </div>
                <table id="cell-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Gene Name</th>
                            <th>Relative Expression</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="gene-table-container" class="table-container">
                <div id="input-gene-area">
                    <input type="text" id="gene-input" placeholder="Enter gene name">
                </div>
                <table id="gene-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Cell ID</th>
                            <th>Cluster</th>
                            <th>Relative Expression</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="marker-container" class="table-container">
                <button id="from-input-next-btn" style="display:inline-block; margin-left: 50px;">Next</button>
                <table id="marker-table">
                    <thead>
                        <tr>
                            <th>Cell Type</th>
                            <th>Marker Genes (comma-separated)</th>
                        </tr>
                    </thead>
                    <tbody id="marker-tbody"></tbody>
                </table>
            </div>

            <div id="celltype-container" class="table-container">
                <button id="from-celltype-back-btn">Back</button>
                <button id="from-celltype-next-btn">Next</button>
                <table id="celltype-table">
                    <thead>
                        <tr>
                            <th>Cell Type</th>
                            <th>Marker Gene</th>
                            <th>Cluster</th>
                            <th>Score</th>
                            <th>Gene Rank in Cluster</th>
                            <th>Adjusted P-Value</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            
            <div id="cluster-celltype-container" class="table-container">
                <button id="from-cluster-back-btn">Back</button>
                <table id="cluster-celltype-table">
                    <thead>
                        <tr>
                            <th>Cluster</th>
                            <th>Cell Type</th>
                            <th>Marker Gene</th>
                            <th>Score</th>
                            <th>Gene Rank in Cluster</th>
                            <th>Adjusted P-Value</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>       
    </div>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
